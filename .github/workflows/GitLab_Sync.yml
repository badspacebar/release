name: 'GitLab_SyncğŸ”„'

# å½“ä»“åº“æœ‰ä»»ä½•æ–°çš„æ›´æ”¹æ—¶è§¦å‘ï¼Œæˆ–è€…æ‰‹åŠ¨è§¦å‘
on: 
  push:
  workflow_dispatch:

jobs:
  mirror_to_gitlab:
    runs-on: ubuntu-latest

    steps:
      # ä½¿ç”¨Turnstyleç¡®ä¿åœ¨åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ª"GitLab_Sync"å·¥ä½œæµåœ¨æ‰§è¡Œ
      - name: 'ğŸ”’ ç­‰å¾…å‰ä¸€ä¸ªGitLab_Syncå·¥ä½œæµå®Œæˆ'
        uses: softprops/turnstyle@v1
        with:
          same-branch-only: 'false' # æ˜¯å¦åªé’ˆå¯¹ç›¸åŒåˆ†æ”¯çš„å·¥ä½œæµã€‚è®¾ç½®ä¸º'false'æ„å‘³ç€æ­¤è¡Œä¸ºé€‚ç”¨äºæ‰€æœ‰åˆ†æ”¯ã€‚
          poll-interval-seconds: 5  # è®¾ç½®ä¸ºæ¯5ç§’æ£€æŸ¥ä¸€æ¬¡
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          
      # ğŸ“˜ æ£€å‡ºå½“å‰çš„ä»£ç å¹¶è·å–å®Œæ•´çš„Gitå†å²
      - name: 'ğŸ“¥ æ£€å‡º'
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # ğŸš€ å°†ä»£ç åŒæ­¥åˆ°GitLab
      - name: 'ğŸ”„ åŒæ­¥åˆ°GitLab'
        uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url: git@jihulab.com:WizisCool/KiKHanbot.git
          ssh_private_key: ${{ secrets.GITLAB_KEY }}
  