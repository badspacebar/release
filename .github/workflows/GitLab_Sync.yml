name: 'GitLab_Sync🔄'

# 当仓库有任何新的更改时触发，或者手动触发
on: 
  push:
  workflow_dispatch:

jobs:
  mirror_to_gitlab:
    runs-on: ubuntu-latest

    steps:
      # 📘 检出当前的代码并获取完整的Git历史
      - name: '📥 检出'
        uses: actions/checkout@v2
        with:
          fetch-depth: 0

      # 🚀 将代码同步到GitLab
      - name: '🔄 同步到GitLab'
        uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url: git@jihulab.com:WizisCool/KiKHanbot.git
          ssh_private_key: ${{ secrets.GITLAB_KEY }}
  